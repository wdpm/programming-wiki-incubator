# 为什么 Redis 不适合做消息队列

## 可靠性问题（易丢失消息）

- 持久化机制不足：Redis 虽然支持 RDB 和 AOF 持久化，但在极端情况下（如宕机时未持久化的数据）仍可能丢失消息。例如，AOF 每秒刷盘是异步的，宕机时可能丢失 1 秒的数据。

- 主从切换风险：Redis 主从复制是异步的，若主节点宕机且从节点未完全同步数据，可能导致消息丢失。

- 无专业消息队列的冗余机制：Kafka、RabbitMQ 等通常采用多副本+磁盘存储，而 Redis 依赖单点或有限的主从架构，可靠性较低。

## 功能局限性

缺少高级消息队列特性：

- 无消息确认机制：Redis List 消费后消息即删除，若消费者崩溃，消息无法重新投递（需自行实现备份队列或使用 Streams 的 ACK）。

- 不支持死信队列、重试机制：专业队列（如 RabbitMQ）可自动处理失败消息，而 Redis 需手动实现。

- 消息顺序性问题：Redis List 虽支持 FIFO，但 Pub/Sub 或 Streams 在多消费者场景下可能无法严格保序。

多消费者支持较弱：需额外设计并发控制，而 Kafka 等天然支持消费者组。

## 性能限制

- 内存依赖导致成本高：Redis 基于内存，消息积压时易引发 OOM（内存溢出），而 Kafka/RabbitMQ 使用磁盘存储，成本更低。

- 扩展性不足：Redis Cluster 虽支持分布式，但扩容复杂，且单 List 无法水平拆分，而 Kafka 可轻松分片。

- 单线程瓶颈：Redis 单线程模型在高并发写入时可能成为性能瓶颈。